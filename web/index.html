<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sea Dogs Tavern | 디스코드 봇 관리</title>
    <!-- 기본 스타일시트 -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/loading.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <!-- 모듈별 스타일시트는 동적으로 로드됨 -->
    <!-- 수정 사항용 스타일시트: 문제 해결을 위한 CSS 추가 -->
    <link rel="stylesheet" href="css/fixes.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- 구글 폰트 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 로딩 화면 -->
    <div id="loading-container">
        <div class="loading-content">
            <div class="loading-logo">
                <!-- 로컬 GIF 파일로 변경 -->
                <img src="Animation1.gif" alt="aimbot.ad">
            </div>
            <div class="loading-text">
                <span id="loading-message">안녕하세요</span>
            </div>
            <div class="loading-progress-container">
                <div class="loading-progress-bar" id="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- 메인 컨테이너 -->
    <div id="main-container" style="display: none;">
        <!-- 상단 사용자 정보 바 -->
        <div id="user-info-area" class="user-info-area" style="display: none;">
            <div class="user-info-content">
                <div class="user-info-details">
                    <span class="user-info-label">사용자:</span>
                    <span id="user-info-name" class="user-info-value"></span>
                </div>
                <div class="user-info-details">
                    <span class="user-info-label">권한:</span>
                    <span id="user-info-role" class="user-info-value"></span>
                </div>
                <div class="user-info-details">
                    <span class="user-info-label">담당 서버:</span>
                    <span id="user-info-server" class="user-info-value"></span>
                </div>
                <div class="user-info-actions">
                    <button id="logout-btn" class="btn-logout">로그아웃</button>
                </div>
            </div>
        </div>
        
        <!-- 온라인 관리자 현황 -->
        <div id="online-admins-area" class="online-admins-area">
            <div class="online-admins-content">
                <div class="online-admins-title">온라인 관리자</div>
                <div id="online-admins-list" class="online-admins-list">
                    <!-- 여기에 온라인 관리자 목록이 동적으로 표시됨 -->
                </div>
            </div>
        </div>

        <!-- 사이드바 메뉴 -->
        <div class="side-bar">
            <div class="side-bar__icon-box">
                <div class="side-bar__icon-1">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
            <ul>
                <li>
                    <a href="#main"><i class="fas fa-home"></i> 메인</a>
                </li>
                <li>
                    <a href="#dashboard"><i class="fas fa-chart-line"></i> 대시보드</a>
                </li>
                <li>
                    <a href="#module-mgmt"><i class="fas fa-puzzle-piece"></i> 모듈관리</a>
                </li>
                <li>
                    <a href="#embed"><i class="fas fa-image"></i> 임베드</a>
                </li>
                <li>
                    <a href="#admin"><i class="fas fa-lock"></i> 관리자</a>
                </li>
                <li class="login-menu-item">
                    <a href="#" id="login-btn"><i class="fas fa-sign-in-alt"></i> 로그인</a>
                </li>
            </ul>
        </div>

        <!-- 콘텐츠 영역 -->
        <div id="content-container">
            <!-- 메인 페이지 (처음 표시) -->
            <div id="main-page" class="content-page active-page">
                <div class="main-header animate-item">
                    <!-- 로컬 GIF 파일로 변경 -->
                    <img src="Animation1.gif" alt="aimbot.ad" class="main-logo">
                </div>
                <div class="main-body animate-item">
                    <h1>Aimbot 대시보드</h1>
                </div>
                <div class="main-footer animate-item">
                    <p>AOW Union • TBO SDT clan</p>
                    <div class="discord-links">
                        <a href="#" class="discord-link"><i class="fab fa-discord"></i> SDT 디스코드 서버</a>
                        <a href="#" class="discord-link"><i class="fab fa-discord"></i> TBO 디스코드 서버</a>
                    </div>
                    <p>디스코드 봇 제작 및 호스팅 문의</p>
                    <div class="tech-tags">
                        <span class="tag"><i class="fab fa-python"></i> Python</span>
                        <span class="tag"><i class="fab fa-js"></i> Discord.js</span>
                        <span class="tag"><i class="fas fa-code"></i> API 연동</span>
                        <span class="tag"><i class="fas fa-server"></i> 웹/클라우드 호스팅</span>
                        <span class="tag"><i class="fas fa-users"></i> 클랜</span>
                    </div>
                </div>
            </div>

            <!-- 모듈 컨텐츠는 여기에 동적으로 로드됨 -->
            <div id="module-content"></div>
        </div>
    </div>

    <!-- 로그인 모달 -->
    <div id="login-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>로그인</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">아이디</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">비밀번호</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn-primary">로그인</button>
                <p class="register-link">
                    <a href="#" id="register-btn">회원가입</a>
                </p>
            </form>
            <p class="login-message"></p>
        </div>
    </div>
    
    <!-- 회원가입 모달 -->
    <div id="register-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>회원가입</h2>
            <form id="register-form">
                <div class="form-group">
                    <label for="register-username">아이디</label>
                    <input type="text" id="register-username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="register-password">비밀번호</label>
                    <input type="password" id="register-password" name="password" required>
                </div>
                <div class="form-group">
                    <label for="register-password-confirm">비밀번호 확인</label>
                    <input type="password" id="register-password-confirm" name="password-confirm" required>
                </div>
                <div class="form-group">
                    <label for="register-invite-code">초대 코드</label>
                    <input type="text" id="register-invite-code" name="invite-code" required>
                </div>
                <button type="submit" class="btn-primary">회원가입</button>
            </form>
            <p class="register-message"></p>
        </div>
    </div>

    <!-- 기본 스크립트 -->
    <script src="js/main.js"></script>
    <script src="js/websocket.js"></script>
    <script src="js/auth.js"></script>
    <!-- 모듈별 스크립트는 동적으로 로드됨 -->
    
    <!-- 수정 사항용 스크립트: 문제 해결을 위한 JS 추가 -->
    <script src="js/fixes.js"></script>
    
    <!-- 온라인 관리자 관리 스크립트 -->
    <script>
        // 온라인 관리자 목록 업데이트 함수
        function updateOnlineAdmins(admins) {
            const onlineAdminsList = document.getElementById('online-admins-list');
            if (!onlineAdminsList) return;
            
            // 목록 초기화
            onlineAdminsList.innerHTML = '';
            
            if (!admins || admins.length === 0) {
                onlineAdminsList.innerHTML = '<div class="no-admins">온라인 관리자가 없습니다.</div>';
                return;
            }
            
            // 관리자 목록 생성
            admins.forEach(admin => {
                const adminItem = document.createElement('div');
                adminItem.className = 'admin-item';
                
                let roleIcon = 'fa-user';
                let roleClass = 'role-user';
                
                if (admin.role === 'admin' || admin.role === 'level1') {
                    roleIcon = 'fa-crown';
                    roleClass = 'role-admin';
                } else if (admin.role === 'level2') {
                    roleIcon = 'fa-shield-alt';
                    roleClass = 'role-mod';
                } else if (admin.role === 'level3') {
                    roleIcon = 'fa-user-shield';
                    roleClass = 'role-helper';
                }
                
                adminItem.innerHTML = `
                    <div class="admin-name">
                        <i class="fas ${roleIcon} ${roleClass}"></i>
                        ${admin.username}
                    </div>
                    <div class="admin-status">온라인</div>
                `;
                
                onlineAdminsList.appendChild(adminItem);
            });
        }
    </script>
</body>
</html>